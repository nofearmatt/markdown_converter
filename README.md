# AI Studio Converter

Приложение для конвертации файлов чатов AI Studio из JSON формата в читаемый текстовый формат.

## Возможности

- **Конвертация JSON файлов** AI Studio в текстовый формат
- **Настраиваемый экспорт**:
  - Включение/исключение системного промпта
  - Включение/исключение настроек модели
  - Исключение "мыслей" модели (isThought: true)
- **Пакетная обработка** всех JSON файлов в папке
- **Сохранение настроек** между сессиями
- **Отзывчивый интерфейс** с прогресс-баром
- **Готовый к распространению** исполняемый файл

## Структура проекта

```
AI_Studio_Converter/
├── app/                    # Основной код приложения
│   ├── __init__.py        
│   ├── main.py            # Точка входа и главный контроллер
│   ├── gui.py             # Графический интерфейс (CustomTkinter)
│   ├── app_logic.py       # Логика конвертации файлов
│   └── settings.py        # Управление настройками
├── dist/                  # Готовый исполняемый файл
│   └── AIStudioConverter  # Исполняемый файл для Linux
├── test_data/             # Тестовые данные
├── requirements.txt       # Зависимости Python
└── README.md             # Этот файл
```

## Установка и запуск (для разработчиков)

### Требования
- Python 3.10+
- tkinter (для GUI)

### Установка зависимостей

1. Клонируйте репозиторий и перейдите в папку проекта
2. Создайте виртуальное окружение:
   ```bash
   python3 -m venv venv
   ```

3. Активируйте виртуальное окружение:
   
   **Linux/macOS:**
   ```bash
   source venv/bin/activate
   ```
   
   **Windows:**
   ```bash
   venv\Scripts\activate
   ```

4. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

5. Установите tkinter (если необходимо):
   
   **Ubuntu/Debian:**
   ```bash
   sudo apt install python3-tk
   ```

### Запуск из исходного кода

```bash
source venv/bin/activate  # Для Linux/macOS
python app/main.py
```

## Использование готового приложения

1. Запустите исполняемый файл `AIStudioConverter` из папки `dist/`
2. Выберите папку с исходными JSON файлами AI Studio
3. Выберите папку для сохранения результатов
4. Настройте параметры экспорта (по желанию)
5. Нажмите "Начать Конвертацию"

## Формат входных файлов

Приложение работает с JSON файлами AI Studio, содержащими:
- `systemInstruction` - системный промпт
- `runSettings` - настройки модели
- `contents` - массив сообщений диалога

### Пример входного JSON:
```json
{
  "systemInstruction": {
    "parts": [{"text": "Системный промпт"}]
  },
  "runSettings": {
    "temperature": 0.7,
    "topP": 0.9
  },
  "contents": [
    {
      "role": "user",
      "parts": [{"text": "Вопрос пользователя"}]
    },
    {
      "role": "model", 
      "parts": [
        {"text": "Ответ модели"},
        {"text": "Внутренние мысли", "isThought": true}
      ]
    }
  ]
}
```

## Формат выходных файлов

Текстовый файл с структурированным содержимым:

```
=== СИСТЕМНЫЙ ПРОМПТ ===
Системный промпт

=== НАСТРОЙКИ МОДЕЛИ ===
temperature: 0.7
topP: 0.9

=== ДИАЛОГ ===

--- ПОЛЬЗОВАТЕЛЬ ---
Вопрос пользователя

--- МОДЕЛЬ ---
Ответ модели
```

## Настройки приложения

- **Включить системный промпт** - добавляет systemInstruction в выходной файл
- **Включить настройки модели** - добавляет runSettings в выходной файл  
- **Исключить 'мысли' модели** - пропускает части с `isThought: true`

Настройки автоматически сохраняются между сессиями в:
- **Linux/macOS:** `~/.config/AIStudioConverter/settings.json`
- **Windows:** `%APPDATA%/AIStudioConverter/settings.json`

## Сборка исполняемого файла

Для создания исполняемого файла используется PyInstaller:

```bash
source venv/bin/activate
pyinstaller --name AIStudioConverter --onefile --windowed \
    --add-data "venv/lib/python3.13/site-packages/customtkinter:customtkinter/" \
    app/main.py
```

Готовый файл будет в папке `dist/`

## Технические детали

- **Язык:** Python 3.13
- **GUI:** CustomTkinter (современная альтернатива Tkinter)
- **Архитектура:** Многопоточная (GUI + Worker thread)
- **Упаковка:** PyInstaller
- **Размер:** ~16MB (standalone)

## Особенности архитектуры

- **Отзывчивый интерфейс:** Конвертация выполняется в отдельном потоке
- **Обработка ошибок:** Подробное логирование и уведомления
- **Кроссплатформенность:** Работает на Windows, Linux, macOS
- **Безопасность:** Проверка формата файлов перед конвертацией

## Статус разработки

✅ Все задачи выполнены:
- ✅ Создание структуры проекта
- ✅ Логика конвертации JSON файлов
- ✅ Модуль настроек
- ✅ Графический интерфейс
- ✅ Главный контроллер
- ✅ Тестирование приложения
- ✅ Настройка PyInstaller
- ✅ Сборка исполняемого файла

Приложение готово к использованию!
